<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retail Calculator - Golden Hive</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23f59e0b'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z'/><circle cx='12' cy='12' r='3'/></svg>">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script>
        // Fix price set for this page before any app script runs
        localStorage.setItem('selectedPriceSet', 'retail');
    </script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d',
                            400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309',
                            800: '#92400e', 900: '#78350f',
                        },
                        secondary: {
                            50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1',
                            400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c',
                            800: '#292524', 900: '#1c1917',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-secondary-50 text-secondary-800 font-sans antialiased">
    <script src="price-sets.js"></script>
    <script src="components/app-header.js"></script>
    <script src="components/honey-product.js"></script>
    <script src="components/profit-summary.js"></script>

    <app-header data-price-set="retail"></app-header>
    <main class="container mx-auto px-4 py-6 max-w-7xl">
        <div class="mb-6 text-center">
            <h1 id="calc-retail-heading" class="text-3xl md:text-4xl font-bold text-primary-700 mb-2 tracking-tight">Retail Sales Calculator</h1>
            <p id="calc-retail-subtitle" class="text-secondary-600 text-base max-w-2xl mx-auto">Track honey sales and profits with retail pricing.</p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <div class="lg:col-span-3 grid grid-cols-2 xl:grid-cols-3 gap-3 md:gap-4" id="products-grid"></div>
            <div class="lg:col-span-1">
                <div class="sticky top-24 space-y-4">
                    <profit-summary id="summary-panel"></profit-summary>
                    <div class="bg-white rounded-2xl shadow-lg border border-primary-100 p-5">
                        <h3 class="text-base font-semibold text-secondary-800 mb-3 flex items-center gap-2">
                            <i data-feather="settings" class="w-4 h-4 text-primary-600"></i>
                            <span id="calc-retail-quick-actions">Quick Actions</span>
                        </h3>
                        <div class="space-y-3">
                            <button onclick="resetAll()" class="w-full py-2.5 px-4 bg-secondary-100 hover:bg-secondary-200 text-secondary-700 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2 font-medium text-sm">
                                <i data-feather="rotate-ccw" class="w-4 h-4"></i>
                                <span id="calc-retail-reset">Reset All Sales</span>
                            </button>
                            <button onclick="exportData()" class="w-full py-2.5 px-4 bg-primary-100 hover:bg-primary-200 text-primary-700 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2 font-medium text-sm">
                                <i data-feather="download" class="w-4 h-4"></i>
                                <span id="calc-retail-export">Export Report</span>
                            </button>
                            <button onclick="printReport()" class="w-full py-2.5 px-4 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors duration-200 flex items-center justify-center gap-2 font-medium shadow-md shadow-primary-200 text-sm">
                                <i data-feather="printer" class="w-4 h-4"></i>
                                <span id="calc-retail-print">Print Summary</span>
                            </button>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl shadow-lg p-5 text-white">
                        <div class="flex items-center gap-2 mb-2">
                            <i data-feather="info" class="w-4 h-4 text-primary-100"></i>
                            <h4 id="calc-retail-protip-title" class="font-semibold text-base">Pro Tip</h4>
                        </div>
                        <p id="calc-retail-protip-body" class="text-primary-100 text-xs leading-relaxed">
                            Click on price fields to edit costs and selling prices. Updates happen in real-time.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        (function() {
            const lang = (localStorage.getItem('selectedLanguage') || 'en').toLowerCase();
            const t = (en, fr, ar) => (lang === 'fr' ? fr : lang === 'ar' ? ar : en);
            if (lang === 'ar') {
                document.documentElement.lang = 'ar';
                document.documentElement.dir = 'rtl';
            } else if (lang === 'fr') {
                document.documentElement.lang = 'fr';
                document.documentElement.dir = 'ltr';
            } else {
                document.documentElement.lang = 'en';
                document.documentElement.dir = 'ltr';
            }

            document.getElementById('calc-retail-heading').textContent =
                t('Retail Sales Calculator', 'Calculateur ventes détail', 'حاسبة مبيعات التجزئة');
            document.getElementById('calc-retail-subtitle').textContent =
                t('Track honey sales and profits with retail pricing.',
                  'Suivez vos ventes de miel et vos profits avec les tarifs de détail.',
                  'تتبع مبيعات العسل والأرباح بأسعار التجزئة.');
            document.getElementById('calc-retail-quick-actions').textContent =
                t('Quick Actions', 'Actions rapides', 'إجراءات سريعة');
            document.getElementById('calc-retail-reset').textContent =
                t('Reset All Sales', 'Réinitialiser les ventes', 'تصفير جميع المبيعات');
            document.getElementById('calc-retail-export').textContent =
                t('Export Report', 'Exporter le rapport', 'تصدير التقرير');
            document.getElementById('calc-retail-print').textContent =
                t('Print Summary', 'Imprimer le résumé', 'طباعة الملخص');
            document.getElementById('calc-retail-protip-title').textContent =
                t('Pro Tip', 'Astuce', 'نصيحة');
            document.getElementById('calc-retail-protip-body').textContent =
                t('Click on price fields to edit costs and selling prices. Updates happen in real-time.',
                  'Cliquez sur les champs de prix pour modifier coûts et prix de vente. Les mises à jour sont instantanées.',
                  'انقر على حقول الأسعار لتعديل التكلفة وسعر البيع. يتم التحديث فورًا.');
        })();
    </script>
</body>
</html>
